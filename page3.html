<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>FRONT END SOLUTIONS FOR INTERNET OF THINGS APPLICATION.</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom icons -->
        <link rel="apple-touch-icon" sizes="57x57" href="img/icons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="img/icons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="img/icons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="img/icons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="img/icons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="img/icons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="img/icons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="img/icons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="img/icons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="img/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="img/icons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon-16x16.png">
        <link rel="manifest" href="img/icons/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
    

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top">
      <div class="container">
        <a class="navbar-brand" href="#">FRONT END SOLUTIONS FOR IOT APPLICATION</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="page1.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="page2.html">Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="page3.html">Write To Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="page4.html">Find Us</a>
            </li>

          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center">
          <h1 class="mt-5">FRONT END SOLUTIONS FOR IOT APPLICATION.</h1>
         
          <canvas id="canvas" width="400" height="400" style="background-color:#333">
            </canvas>

            <script>
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            var radius = canvas.height / 2;
            ctx.translate(radius, radius);
            radius = radius * 0.90
            setInterval(drawClock, 1000);

            function drawClock() {
              drawFace(ctx, radius);
              drawNumbers(ctx, radius);
              drawTime(ctx, radius);
            }

            function drawFace(ctx, radius) {
              var grad;
              ctx.beginPath();
              ctx.arc(0, 0, radius, 0, 2*Math.PI);
              ctx.fillStyle = 'white';
              ctx.fill();
              grad = ctx.createRadialGradient(0,0,radius*0.95, 0,0,radius*1.05);
              grad.addColorStop(0, '#333');
              grad.addColorStop(0.5, 'white');
              grad.addColorStop(1, '#333');
              ctx.strokeStyle = grad;
              ctx.lineWidth = radius*0.1;
              ctx.stroke();
              ctx.beginPath();
              ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
              ctx.fillStyle = '#333';
              ctx.fill();
            }

            function drawNumbers(ctx, radius) {
              var ang;
              var num;
              ctx.font = radius*0.15 + "px arial";
              ctx.textBaseline="middle";
              ctx.textAlign="center";
              for(num = 1; num < 13; num++){
                ang = num * Math.PI / 6;
                ctx.rotate(ang);
                ctx.translate(0, -radius*0.85);
                ctx.rotate(-ang);
                ctx.fillText(num.toString(), 0, 0);
                ctx.rotate(ang);
                ctx.translate(0, radius*0.85);
                ctx.rotate(-ang);
              }
            }

            function drawTime(ctx, radius){
                var now = new Date();
                var hour = now.getHours();
                var minute = now.getMinutes();
                var second = now.getSeconds();
                //hour
                hour=hour%12;
                hour=(hour*Math.PI/6)+
                (minute*Math.PI/(6*60))+
                (second*Math.PI/(360*60));
                drawHand(ctx, hour, radius*0.5, radius*0.07);
                //minute
                minute=(minute*Math.PI/30)+(second*Math.PI/(30*60));
                drawHand(ctx, minute, radius*0.8, radius*0.07);
                // second
                second=(second*Math.PI/30);
                drawHand(ctx, second, radius*0.9, radius*0.02);
            }

            function drawHand(ctx, pos, length, width) {
                ctx.beginPath();
                ctx.lineWidth = width;
                ctx.lineCap = "round";
                ctx.moveTo(0,0);
                ctx.rotate(pos);
                ctx.lineTo(0, -length);
                ctx.stroke();
                ctx.rotate(-pos);
            }
            </script>

            <div class="container">
              <h1>Gmail API</h1>

              <a href="#compose-modal" data-toggle="modal" id="compose-button" class="btn btn-primary pull-right hidden">Compose</a>

              <button id="authorize-button" class="btn btn-primary hidden">Authorize</button>

              <table class="table table-striped table-inbox hidden">
                <thead>
                  <tr>
                    <th>From</th>
                    <th>Subject</th>
                    <th>Date/Time</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

            <div class="modal fade" id="compose-modal" tabindex="-1" role="dialog">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">Compose</h4>
                  </div>
                  <form onsubmit="return sendEmail();">
                    <div class="modal-body">
                      <div class="form-group">
                        <input type="email" class="form-control" id="compose-to" placeholder="To" required />
                      </div>

                      <div class="form-group">
                        <input type="text" class="form-control" id="compose-subject" placeholder="Subject" required />
                      </div>

                      <div class="form-group">
                        <textarea class="form-control" id="compose-message" placeholder="Message" rows="10" required></textarea>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      <button type="submit" id="send-button" class="btn btn-primary">Send</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <div class="modal fade" id="reply-modal" tabindex="-1" role="dialog">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">Reply</h4>
                  </div>
                  <form onsubmit="return sendReply();">
                    <input type="hidden" id="reply-message-id" />

                    <div class="modal-body">
                      <div class="form-group">
                        <input type="text" class="form-control" id="reply-to" disabled />
                      </div>

                      <div class="form-group">
                        <input type="text" class="form-control disabled" id="reply-subject" disabled />
                      </div>

                      <div class="form-group">
                        <textarea class="form-control" id="reply-message" placeholder="Message" rows="10" required></textarea>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      <button type="submit" id="reply-button" class="btn btn-primary">Send</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
            <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

            <script type="text/javascript">
              {"web":{"client_id":"466380816984-jcel7dpmarmoche440tnsiirlot56rlb.apps.googleusercontent.com","project_id":"concise-rampart-213112","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://www.googleapis.com/oauth2/v3/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_secret":"kARpkG2oFz5mC-QvjJdvk4xd","redirect_uris":["https://anshikabanerjee.example.com/EIS"],"javascript_origins":["https://anshikabanerjee.example.com"]}}
              var scopes =
                'https://www.googleapis.com/auth/gmail.readonly '+
                'https://www.googleapis.com/auth/gmail.send';
              function handleClientLoad() {
                gapi.client.setApiKey(apiKey);
                window.setTimeout(checkAuth, 1);
              }
              function checkAuth() {
                gapi.auth.authorize({
                  client_id: clientId,
                  scope: scopes,
                  immediate: true
                }, handleAuthResult);
              }
              function handleAuthClick() {
                gapi.auth.authorize({
                  client_id: clientId,
                  scope: scopes,
                  immediate: false
                }, handleAuthResult);
                return false;
              }
              function handleAuthResult(authResult) {
                if(authResult && !authResult.error) {
                  loadGmailApi();
                  $('#authorize-button').remove();
                  $('.table-inbox').removeClass("hidden");
                  $('#compose-button').removeClass("hidden");
                } else {
                  $('#authorize-button').removeClass("hidden");
                  $('#authorize-button').on('click', function(){
                    handleAuthClick();
                  });
                }
              }
              function loadGmailApi() {
                gapi.client.load('gmail', 'v1', displayInbox);
              }
              function displayInbox() {
                var request = gapi.client.gmail.users.messages.list({
                  'userId': 'me',
                  'labelIds': 'INBOX',
                  'maxResults': 10
                });
                request.execute(function(response) {
                  $.each(response.messages, function() {
                    var messageRequest = gapi.client.gmail.users.messages.get({
                      'userId': 'me',
                      'id': this.id
                    });
                    messageRequest.execute(appendMessageRow);
                  });
                });
              }
              function appendMessageRow(message) {
                $('.table-inbox tbody').append(
                  '<tr>\
                    <td>'+getHeader(message.payload.headers, 'From')+'</td>\
                    <td>\
                      <a href="#message-modal-' + message.id +
                        '" data-toggle="modal" id="message-link-' + message.id+'">' +
                        getHeader(message.payload.headers, 'Subject') +
                      '</a>\
                    </td>\
                    <td>'+getHeader(message.payload.headers, 'Date')+'</td>\
                  </tr>'
                );
                var reply_to = (getHeader(message.payload.headers, 'Reply-to') !== '' ?
                  getHeader(message.payload.headers, 'Reply-to') :
                  getHeader(message.payload.headers, 'From')).replace(/\"/g, '&quot;');
                var reply_subject = 'Re: '+getHeader(message.payload.headers, 'Subject').replace(/\"/g, '&quot;');
                $('body').append(
                  '<div class="modal fade" id="message-modal-' + message.id +
                      '" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\
                    <div class="modal-dialog modal-lg">\
                      <div class="modal-content">\
                        <div class="modal-header">\
                          <button type="button"\
                                  class="close"\
                                  data-dismiss="modal"\
                                  aria-label="Close">\
                            <span aria-hidden="true">&times;</span></button>\
                          <h4 class="modal-title" id="myModalLabel">' +
                            getHeader(message.payload.headers, 'Subject') +
                          '</h4>\
                        </div>\
                        <div class="modal-body">\
                          <iframe id="message-iframe-'+message.id+'" srcdoc="<p>Loading...</p>">\
                          </iframe>\
                        </div>\
                        <div class="modal-footer">\
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\
                          <button type="button" class="btn btn-primary reply-button" data-dismiss="modal" data-toggle="modal" data-target="#reply-modal"\
                          onclick="fillInReply(\
                            \''+reply_to+'\', \
                            \''+reply_subject+'\', \
                            \''+getHeader(message.payload.headers, 'Message-ID')+'\'\
                            );"\
                          >Reply</button>\
                        </div>\
                      </div>\
                    </div>\
                  </div>'
                );
                $('#message-link-'+message.id).on('click', function(){
                  var ifrm = $('#message-iframe-'+message.id)[0].contentWindow.document;
                  $('body', ifrm).html(getBody(message.payload));
                });
              }
              function sendEmail()
              {
                $('#send-button').addClass('disabled');
                sendMessage(
                  {
                    'To': $('#compose-to').val(),
                    'Subject': $('#compose-subject').val()
                  },
                  $('#compose-message').val(),
                  composeTidy
                );
                return false;
              }
              function composeTidy()
              {
                $('#compose-modal').modal('hide');
                $('#compose-to').val('');
                $('#compose-subject').val('');
                $('#compose-message').val('');
                $('#send-button').removeClass('disabled');
              }
              function sendReply()
              {
                $('#reply-button').addClass('disabled');
                sendMessage(
                  {
                    'To': $('#reply-to').val(),
                    'Subject': $('#reply-subject').val(),
                    'In-Reply-To': $('#reply-message-id').val()
                  },
                  $('#reply-message').val(),
                  replyTidy
                );
                return false;
              }
              function replyTidy()
              {
                $('#reply-modal').modal('hide');
                $('#reply-message').val('');
                $('#reply-button').removeClass('disabled');
              }
              function fillInReply(to, subject, message_id)
              {
                $('#reply-to').val(to);
                $('#reply-subject').val(subject);
                $('#reply-message-id').val(message_id);
              }
              function sendMessage(headers_obj, message, callback)
              {
                var email = '';
                for(var header in headers_obj)
                  email += header += ": "+headers_obj[header]+"\r\n";
                email += "\r\n" + message;
                var sendRequest = gapi.client.gmail.users.messages.send({
                  'userId': 'me',
                  'resource': {
                    'raw': window.btoa(email).replace(/\+/g, '-').replace(/\//g, '_')
                  }
                });
                return sendRequest.execute(callback);
              }
              function getHeader(headers, index) {
                var header = '';
                $.each(headers, function(){
                  if(this.name.toLowerCase() === index.toLowerCase()){
                    header = this.value;
                  }
                });
                return header;
              }
              function getBody(message) {
                var encodedBody = '';
                if(typeof message.parts === 'undefined')
                {
                  encodedBody = message.body.data;
                }
                else
                {
                  encodedBody = getHTMLPart(message.parts);
                }
                encodedBody = encodedBody.replace(/-/g, '+').replace(/_/g, '/').replace(/\s/g, '');
                return decodeURIComponent(escape(window.atob(encodedBody)));
              }
              function getHTMLPart(arr) {
                for(var x = 0; x <= arr.length; x++)
                {
                  if(typeof arr[x].parts === 'undefined')
                  {
                    if(arr[x].mimeType === 'text/html')
                    {
                      return arr[x].body.data;
                    }
                  }
                  else
                  {
                    return getHTMLPart(arr[x].parts);
                  }
                }
                return '';
              }
            </script>
            <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>






          
        </div>
      </div>
    </div>

        <!-- Service Worker -->
        <script type="text/javascript">
          if (navigator.serviceWorker.controller) {
          console.log('[PWA Builder] active service worker found, no need to register')
          } else {
          //Register the ServiceWorker
          navigator.serviceWorker.register('pwabuilder-sw.js', {
          scope: './'
          }).then(function(reg) {
          console.log('Service worker has been registered for scope:'+ reg.scope);
          });
          }
          </script>
          <!-- /Service Worker -->

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  </body>

</html>
